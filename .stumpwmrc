;; Hey, Emacs! This is a -*- lisp -*- file!

(setf *frame-number-map* "abcdefghijklmnopqrst")

(setf *window-format* "%m%n%s nm=%50t cl=%c id=%i")

;;(run-commands "restore-from-file ~/.stumpwm.screendump")

;; specific commands that permits to run or raise the same instance of programs
(defcommand firefox () ()
  "Start Firefox or switch to it, if it is already running."
  (run-or-raise "firefox" '(:class "Firefox")))
(define-key *root-map* (kbd "f") "firefox")

(defcommand term1 () ()
  "run term emul"
  (run-or-raise "gnome-terminal --hide-menubar" '(:class "Term1")))
(run-commands "term1")

(defcommand xterm-1 () ()
  "run an xterm instance or switch to it, if it is already running."
  (run-or-raise "gnome-terminal --title=xterm1 --hide-menubar" '(:class "Gnome-terminal")))
(define-key *root-map* (kbd "x") "xterm-1")

;; frame selection
(define-key *root-map* (kbd "o") "fselect")

(defcommand emacs () ()  ;! redefining emacs command
  "Start Emacs or switch to it, if it is already running."
  (run-or-raise "emacs" '(:class "Emacs")))

;; Another way to declare a shortcut for launching google-chrome
(defprogram-shortcut :chromium :command "chromium-browser"
                     :props '(:class "Chromium")
                     :map *root-map* :key (kbd "b"))

;; conkeror - keyboard-driven navigator - C-t c
(defprogram-shortcut :conkeror :command "conkeror" 
                     :props '(:class "Conkeror")
                     :map *root-map* :key (kbd "c"))

;; the ide to the keybinding i (C-t i)
(defprogram-shortcut :eclipse :command "~/bin/ide-eclipse.sh"
                     :props '(:class "Eclipse")
                     :map *root-map* :key (kbd "i"))

;; gnome-control-center
(defprogram-shortcut :gnome-control-center :command "gnome-control-center" 
                     :props '(:class "Gnome-Control-Center")
                     :map *root-map* :key (kbd ","))

;; Totem
(defprogram-shortcut :video-player :command "totem"
                     :props '(:class "Totem")
                     :map *root-map* :key (kbd "."))

;; Intellij-idea (C-t j)
(defprogram-shortcut :intellij-idea :command "~/bin/idea.sh"
                     :props '(:class "java-lang-Thread")
                     :map *root-map* :key (kbd "j"))

;; File explorer nautilus (C-t n)
(defprogram-shortcut :nautilus :command "nautilus"
                     :props '(:instance "nautilus")
                     :map *root-map* :key (kbd "n"))

;; transmission-gtk (C-t /)
(defprogram-shortcut :torrent :command "transmission-gtk"
                     :props '(:instance "transmission-gtk")
                     :map *root-map* :key (kbd "/"))

;; pdf reader evince (C-t C-e)
(defprogram-shortcut :evince :command "evince" 
                     :props '(:instance "evince")
                     :map *root-map* :key (stumpwm:kbd "C-e"))

;; Squirrel-sql
'(defprogram-shortcut :squirrel-sql :command "~/applications/bin/squirrel-sql.sh" 
                     :props '(:class "net-sourceforge-squirrel_sql-client-Main")
                     :map *root-map* :key (kbd "d"))

;;Set the mouse policy to focus follows mouse;
(setf *mouse-focus-policy* :sloppy) ;; :click, :ignore, :sloppy

;; Launch commands
(run-shell-command "stalonetray -t --window-type normal --pixmap-bg ~/Dropbox/home/black-1x1.xpm -v -t")
(run-shell-command "/usr/bin/gnome-settings-daemon")
(run-shell-command "/usr/bin/nm-applet &")
(run-shell-command "/usr/bin/bluetooth-applet &")
(run-shell-command "/usr/bin/pactl load-module module-x11-xsmp &")
(run-shell-command "gnome-power-manager")
(run-shell-command "dropbox start")
(run-shell-command "nautilus --no-default-window")
